import{K as A,r as l,j as e,L as _,$ as k,S as r}from"./app-gWrj3sI5.js";import{A as T}from"./AuthenticatedLayout-CGl4aSSu.js";import{S as c}from"./sweetalert2.esm.all-B0Dix5B2.js";function M({appointments:i,search:j}){const f=A().props.auth.user,[m,N]=l.useState(j||""),[h,d]=l.useState(!1),[u,o]=l.useState(!1),[x,n]=l.useState(!1),[b,p]=l.useState(null),[s,a]=l.useState({title:"",description:"",date_start:"",date_end:"",slot:1,doctor_id:f.id}),v=t=>{t.preventDefault(),r.get(route("appointments.index"),{search:m})},y=()=>{r.post(route("appointments.store"),s,{preserveScroll:!0,onSuccess:()=>{d(!1),c.fire({icon:"success",title:"Created!",text:"Appointment has been created successfully.",timer:2e3,showConfirmButton:!1}),a({...s,title:"",date_start:"",slot:1})}})},S=t=>{p(t),a({...s,title:t.title,date_start:t.date_start,date_end:t.date_end,slot:t.slot}),o(!0)},g=()=>{r.put(route("appointments.update",b.id),s,{preserveScroll:!0,onSuccess:()=>{o(!1),c.fire({icon:"success",title:"Updated!",text:"Appointment has been updated successfully.",timer:2e3,showConfirmButton:!1}),a({...s,title:"",date_start:"",slot:1})}})},C=t=>{p(t),n(!0)},D=()=>{r.delete(route("appointments.destroy",b.id),{preserveScroll:!0,onSuccess:()=>{n(!1),c.fire({icon:"success",title:"Deleted!",text:"Appointment has been deleted successfully.",timer:2e3,showConfirmButton:!1})}})};return e.jsxs(T,{header:e.jsx("div",{className:"page-heading",children:e.jsx("h3",{children:"Appointments"})}),children:[e.jsx(_,{title:"Appointments"}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[e.jsxs("form",{onSubmit:v,className:"d-flex w-50 w-md-100 me-md-2",children:[e.jsx("input",{type:"text",className:"form-control me-2",placeholder:"Search appointments...",value:m,onChange:t=>N(t.target.value)}),e.jsx("button",{type:"submit",className:"btn btn-primary",children:"Search"})]}),e.jsx("button",{className:"btn btn-success",onClick:()=>d(!0),children:"Create Appointment"})]}),e.jsxs("table",{className:"table table-bordered",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Title"}),e.jsx("th",{children:"Date"}),e.jsx("th",{children:"Slot"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:i.data.map(t=>e.jsxs("tr",{children:[e.jsx("td",{children:t.title}),e.jsx("td",{children:new Date(t.date_start).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}),e.jsx("td",{children:t.slot}),e.jsxs("td",{children:[e.jsx("button",{className:"btn btn-primary btn-sm me-2",onClick:()=>S(t),children:"Edit"}),e.jsx("button",{className:"btn btn-danger btn-sm",onClick:()=>C(t),children:"Delete"})]})]},t.id))})]}),e.jsx("div",{className:"d-flex justify-content-end mt-4 mb-4",children:i.links.map((t,w)=>e.jsx(k,{href:t.url,className:`px-3 py-2 mx-1 border rounded ${t.active?"bg-primary text-white":"bg-white"}`,dangerouslySetInnerHTML:{__html:t.label}},w))}),e.jsx("div",{className:`modal fade ${h?"show":""}`,style:{display:h?"block":"none"},children:e.jsx("div",{className:"modal-dialog",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",children:"Create Appointment"}),e.jsx("button",{type:"button",className:"btn-close",onClick:()=>d(!1)})]}),e.jsx("div",{className:"modal-body",children:e.jsxs("form",{onSubmit:t=>{t.preventDefault(),y()},children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"Title"}),e.jsx("input",{type:"text",className:"form-control",value:s.title,onChange:t=>a({...s,title:t.target.value})})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"DATE"}),e.jsx("input",{type:"date",className:"form-control",value:s.date_start,min:new Date().toISOString().split("T")[0],onChange:t=>a({...s,date_start:t.target.value})})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"Slot"}),e.jsx("input",{type:"number",className:"form-control",value:s.slot,onChange:t=>a({...s,slot:t.target.value})})]}),e.jsx("button",{type:"submit",className:"btn btn-primary",children:"Save"})]})})]})})}),e.jsx("div",{className:`modal fade ${u?"show":""}`,style:{display:u?"block":"none"},children:e.jsx("div",{className:"modal-dialog",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",children:"Edit Appointment"}),e.jsx("button",{type:"button",className:"btn-close",onClick:()=>o(!1)})]}),e.jsx("div",{className:"modal-body",children:e.jsxs("form",{onSubmit:t=>{t.preventDefault(),g()},children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"Title"}),e.jsx("input",{type:"text",className:"form-control",value:s.title,onChange:t=>a({...s,title:t.target.value})})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"Date"}),e.jsx("input",{type:"date",className:"form-control",value:s.date_start,min:new Date().toISOString().split("T")[0],onChange:t=>a({...s,date_start:t.target.value})})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"Slot"}),e.jsx("input",{type:"number",className:"form-control",value:s.slot,onChange:t=>a({...s,slot:t.target.value})})]}),e.jsx("button",{type:"submit",className:"btn btn-primary",children:"Update"})]})})]})})}),e.jsx("div",{className:`modal fade ${x?"show":""}`,style:{display:x?"block":"none"},children:e.jsx("div",{className:"modal-dialog",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",children:"Delete Appointment"}),e.jsx("button",{type:"button",className:"btn-close",onClick:()=>n(!1)})]}),e.jsx("div",{className:"modal-body",children:e.jsx("p",{children:"Are you sure you want to delete this appointment?"})}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>n(!1),children:"Cancel"}),e.jsx("button",{type:"button",className:"btn btn-danger",onClick:D,children:"Delete"})]})]})})})]})}export{M as default};
