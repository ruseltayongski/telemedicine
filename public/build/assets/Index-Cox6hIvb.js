import{r as c,j as e,L as x,$ as h,S as u}from"./app-gWrj3sI5.js";import{G as j}from"./GuestLayout-D_Icv3uX.js";function v({bookedAppointments:r}){console.log(r);const[d,n]=c.useState([]);c.useEffect(()=>{const s=new Date().getFullYear();i(s.toString())},[r.data]);const o=()=>{const s=new Date().getFullYear(),t=[];for(let a=s;a>=2024;a--)t.push(a);return t},i=s=>{if(s==="all")n(r.data);else{const t=r.data.filter(a=>new Date(a.appointment.date_start).getFullYear()===parseInt(s));n(t)}},m=(s,t,a)=>{const l=route("prescriptions.pdf",{patient_id:s,doctor_id:t,booking_id:a});window.open(l,"_blank")},p=(s,t,a)=>{console.log(a);const l=route("laboratory.request.pdf",{patient_id:s,doctor_id:t,booking_id:a});window.open(l,"_blank")};return e.jsxs(j,{children:[e.jsx(x,{title:"Book Appointment"}),e.jsx("div",{className:"breadcrumbs overlay",children:e.jsx("div",{className:"container",children:e.jsx("div",{className:"row align-items-center",children:e.jsxs("div",{className:"col-lg-8 offset-lg-2 col-md-12 col-12",children:[e.jsx("div",{className:"breadcrumbs-content",children:e.jsx("h1",{className:"page-title",children:"Booked Appointments"})}),e.jsxs("ul",{className:"breadcrumb-nav",children:[e.jsx("li",{children:e.jsx(h,{href:route("home"),children:"Home"})}),e.jsx("li",{children:"Booked Appointments"})]})]})})})}),e.jsx("section",{id:"contact-us",className:"contact-us section",children:e.jsx("div",{className:"container",children:e.jsxs("div",{className:"contact-head",children:[e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"section-title",children:[e.jsx("h3",{children:"Booked Appointments"}),e.jsx("h2",{children:"Booked Appointment Transactions"}),e.jsx("p",{children:"Below is a comprehensive list of all booking transactions, including details of scheduled and completed appointments."})]})})}),e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-lg-12 col-12",children:e.jsxs("div",{className:"form-main",children:[e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-8",children:e.jsx("div",{className:"form-title",children:e.jsx("h2",{children:"Activity List"})})}),e.jsx("div",{className:"col-md-4",children:e.jsxs("div",{className:"flex items-center",style:{marginTop:"-30px"},children:[e.jsx("label",{htmlFor:"yearFilter",className:"mr-2 font-medium",children:"Filter by Year:"}),e.jsxs("select",{id:"yearFilter",className:"form-select px-3 py-2 border rounded",onChange:s=>i(s.target.value),defaultValue:new Date().getFullYear().toString(),children:[e.jsx("option",{value:"all",children:"All Years"}),o().map(s=>e.jsx("option",{value:s,children:s},s))]})]})})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"border w-100 border-gray-300",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-200",children:[e.jsx("th",{className:"border px-4 py-2",children:"Appointment Date"}),e.jsx("th",{className:"border px-4 py-2",children:"Appointment Title"}),e.jsx("th",{className:"border px-4 py-2",children:"Doctor Name"}),e.jsx("th",{className:"border px-4 py-2",children:"Remarks"}),e.jsx("th",{className:"border px-4 py-2",children:"Status"}),e.jsx("th",{className:"border px-4 py-2",children:"Meeting Link"}),e.jsx("th",{className:"border px-4 py-2",children:"Prescription"}),e.jsx("th",{className:"border px-4 py-2",children:"Laboratory Request"})]})}),e.jsx("tbody",{children:d.map(s=>e.jsxs("tr",{className:"border",children:[e.jsxs("td",{className:"border px-4 py-2",children:[e.jsx("span",{style:{fontSize:"12px"},children:new Date(s.appointment.date_start).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}),e.jsx("small",{className:"text-gray-500 d-block",style:{fontSize:"9px"},children:new Date(`1970-01-01T${s.selected_time}`).toLocaleTimeString([],{hour:"numeric",minute:"2-digit",hour12:!0})})]}),e.jsx("td",{className:"border px-4 py-2",children:s.appointment.title}),e.jsx("td",{className:"border px-4 py-2",children:s.appointment.doctor.name}),e.jsx("td",{className:"border px-4 py-2",children:s.remarks}),e.jsx("td",{className:"border px-4 py-2",children:e.jsx("span",{className:`badge text-uppercase ms-2 ${s.status==="confirmed"?"bg-success text-white":s.status==="pending"?"bg-warning text-dark":s.status==="cancelled"?"bg-danger text-white":"bg-secondary text-white"}`,children:s.status})}),e.jsx("td",{className:"border px-4 py-2",children:s.status==="confirmed"?e.jsxs("form",{action:route("video-call"),method:"GET",target:"_blank",className:"d-inline",children:[e.jsx("input",{type:"hidden",name:"booking_id",value:s.id}),e.jsx("input",{type:"hidden",name:"patient_id",value:s.patient_id}),e.jsx("input",{type:"hidden",name:"recipient",value:"patient"}),e.jsx("a",{href:"#",className:"text-primary text-decoration-none",onClick:t=>{t.preventDefault(),t.target.closest("form").submit()},children:"Join call"})]}):e.jsx("span",{className:"text-gray-500",children:"Not available"})}),e.jsx("td",{className:"border px-4 py-2",children:s.prescription?e.jsx("a",{href:"#",className:"text-primary text-decoration-none",onClick:t=>{t.preventDefault(),m(s.patient_id,s.appointment.doctor_id,s.id)},children:"Download"}):e.jsx("span",{className:"text-muted",children:"Not available"})}),e.jsx("td",{className:"border px-4 py-2",children:s.type=="follow_up"&&s.lab_request?e.jsx("a",{href:"#",className:"text-primary text-decoration-none",onClick:t=>{t.preventDefault(),p(s.patient_id,s.appointment.doctor_id,s.id)},children:"Download"}):e.jsx("span",{className:"text-muted",children:"Not available"})})]},s.id))})]})}),e.jsx("div",{className:"d-flex flex-column align-items-end mt-4 mb-4",style:{minHeight:"40vh"},children:e.jsx("div",{className:"mt-auto",children:r.links.map((s,t)=>e.jsx("button",{onClick:()=>s.url&&u.visit(s.url,{preserveScroll:!0,preserveState:!0}),className:`px-3 py-2 mx-1 border rounded ${s.active?"bg-primary text-white":"bg-white"}`,dangerouslySetInnerHTML:{__html:s.label},disabled:!s.url},t))})})]})})})]})})})]})}export{v as default};
